xlab="Year",ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=3,col=rainbow(4))
dev.copy(png,file="plot1.png", width=480,height=480)
dev.off()
par(ps=12, bg="transparent")
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
xlab="Year",ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=4,col=rainbow(4))
dev.copy(png,file="plot1.png", width=480,height=480)
dev.off()
attach(NEI.plot1)
par(ps=12, bg="transparent")
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
xlab="Year",ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4))
dev.copy(png,file="plot1.png", width=480,height=480)
dev.off()
attach(NEI.plot1)
par(ps=12, bg="transparent")
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4))
dev.copy(png,file="plot1.png", width=480,height=480)
dev.off()
?legend
attach(NEI.plot1)
par(ps=12, bg="transparent")
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4),border="n")
dev.copy(png,file="plot1.png", width=480,height=480)
dev.off()
attach(NEI.plot1)
par(ps=12, bg="transparent")
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4),border=NULL)
dev.copy(png,file="plot1.png", width=480,height=480)
dev.off()
attach(NEI.plot1)
par(ps=12, bg="transparent")
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4),bty="n")
dev.copy(png,file="plot1.png", width=480,height=480)
dev.off()
attach(NEI.plot1)
par(ps=12, bg="transparent")
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4),bty="n")
axis(1, at=xticks, labels=sprintf("%1.2f",xticks))
dev.copy(png,file="plot1.png", width=480,height=480)
dev.off()
attach(NEI.plot1)
par(ps=12, bg="transparent")
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4),bty="n")
xticks <- pretty(totalbyyear)
axis(1, at=xticks, labels=sprintf("%1.2f",xticks))
dev.copy(png,file="plot1.png", width=480,height=480)
dev.off()
axis(1, at=xticks, labels=sprintf("%1.2f",xticks))
attach(NEI.plot1)
par(ps=12, bg="transparent")
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4),bty="n")
xticks <- pretty(totalbyyear)
axis(2, at=xticks, labels=sprintf("%1.2f",xticks))
dev.copy(png,file="plot1.png", width=480,height=480)
dev.off()
xticks
attach(NEI.plot1)
par(ps=12, bg="transparent")
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4),bty="n")
yticks <- pretty(totalbyyear)
axis(2, at=yticks, labels=sprintf("%1.2f",yticks))
dev.copy(png,file="plot1.png", width=480,height=480)
dev.off()
attach(NEI.plot1)
par(ps=12, bg="transparent")
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4),bty="n")
dev.copy(png,file="plot1.png", width=480,height=480)
dev.off()
attach(NEI.plot1)
par(ps=12, bg="transparent")
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4),bty="n")
dev.copy(png,file="plot1.png", width=480,height=480)
detach(NEI.plot1)
dev.off()
attach(NEI.plot1)
par(ps=12, bg="transparent")
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4),bty="n")
dev.copy(png,file="plot1.png")
detach(NEI.plot1)
dev.off()
attach(NEI.plot1)
par(ps=12, bg="transparent")
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
ylab="PM2.5 emissions")
legend("top",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4),bty="n")
dev.copy(png,file="plot1.png")
detach(NEI.plot1)
dev.off()
attach(NEI.plot1)
par(ps=12, bg="transparent")
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4),bty="n")
dev.copy(png,file="plot1.png")
detach(NEI.plot1)
dev.off()
attach(NEI.plot1)
par(ps=12, bg="transparent",bty="l",las=1,lwd=1,cex=0.7,oma = c(1, 1, 0, 1), mar = c(3, 4, 3.5, 5))
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4),bty="n")
dev.copy(png,file="plot1.png")
detach(NEI.plot1)
dev.off()
attach(NEI.plot1)
par(ps=12, bg="transparent",bty="l",las=1,lwd=1,cex=0.7, mar = c(3, 4, 3.5, 5))
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4),bty="n")
dev.copy(png,file="plot1.png")
detach(NEI.plot1)
dev.off()
par(ps=12, bg="transparent",bty="l",las=1,lwd=1,cex=0.7)
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=rainbow(nrow(NEI.plot1)),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=rainbow(4),bty="n")
dev.copy(png,file="plot1.png")
detach(NEI.plot1)
dev.off()
install.packages("RColorBrewer")
library(RColorBrewer)
cols <- brewer.pal(4,"Accent")
cols
attach(NEI.plot1)
library(RColorBrewer)
cols <- brewer.pal(4,"Accent")
par(ps=12, bg="transparent",bty="l",las=1,lwd=1,cex=0.7, mar = c(3, 4, 3.5, 5))
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=cols),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=cols,bty="n")
dev.copy(png,file="plot1.png")
detach(NEI.plot1)
dev.off()
attach(NEI.plot1)
library(RColorBrewer)
cols <- brewer.pal(4,"Accent")
pal <-colorRampPalette(cols)
par(ps=12, bg="transparent",bty="l",las=1,lwd=1,cex=0.7, mar = c(3, 4, 3.5, 5))
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=cols),
ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=cols,bty="n")
dev.copy(png,file="plot1.png")
detach(NEI.plot1)
dev.off()
attach(NEI.plot1)
library(RColorBrewer)
cols <- brewer.pal(4,"Accent")
pal <-colorRampPalette(cols)
par(ps=12, bg="transparent",bty="l",las=1,lwd=1,cex=0.7, mar = c(3, 4, 3.5, 5))
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=cols,ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=cols,bty="n")
dev.copy(png,file="plot1.png")
detach(NEI.plot1)
dev.off()
attach(NEI.plot1)
library(RColorBrewer)
cols <- brewer.pal(4,"Accent")
pal <-colorRampPalette(cols)
par(ps=12, bg="transparent",bty="l",las=1,lwd=1,cex=0.7, mar = c(3, 4, 3.5, 5))
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=pal(4),ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=pal(4),bty="n")
dev.copy(png,file="plot1.png")
detach(NEI.plot1)
dev.off()
setwd("C:/Documents and Settings/Macro/Desktop/Ivandata/National-Emissions-Inventory")
source("plot1.R")
plot1()
?PAR
?par
attach(NEI.plot1)
library(RColorBrewer)
cols <- brewer.pal(4,"Accent")
pal <-colorRampPalette(cols)
par(ps=12, bg="transparent",bty="l",las=1, mar = c(3, 4, 3.5, 5))
barplot(totalbyyear,year, main="Total PM2.5 Emissions for 1999, 2002, 2005 and 2008",
col=pal(4),ylab="PM2.5 emissions")
legend("topright",legend=c(1999,2002,2005,2008),lty=1,col=pal(4),bty="n")
dev.copy(png,file="plot1.png")
detach(NEI.plot1)
dev.off()
source("plot1.R")
plot1()
source("plot1.R")
source("plot1.R")
plot1()
source("plot1.R")
plot1()
source("plot1.R")
plot1()
# set project work directory
setwd("C:/Documents and Settings/Macro/Desktop/Ivandata/National-Emissions-Inventory")
# read data from provided data source
nei.url <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
nei.file <- basename(nei.url)
if(!(file.exists(nei.file)))
download.file(nei.url,destfile=nei.file,method="auto")
nei.file.list <- basename(unzip(nei.file))
#nei.file.list
dir()
# This first line will likely take a few seconds. Be patient!
NEI <- readRDS(nei.file.list[2])
SCC <- readRDS(nei.file.list[1])
head(NEI)
head(SCC)
table(NEI$year)
table(NEI$Pollutant)
table(NEI$type)
NEI.Maryland <- NEI[which(NEI$fips=="24510" & NEI$year %in% c(1999, 2002,2005,2008)),c(1,4,6)]
head(NEI.Maryland)
dim(NEI.Maryland)
str(NEI.Maryland)
table(NEI.Maryland)
table(NEI.Maryland[,3])
table(NEI.Maryland[,2])
table(NEI.Maryland[,1])
str(NEI.Maryland)
NEI.plot2 <- ddply(NEI.Maryland, .(year),.fun=mean(Emissions))
NEI.plot2 <- ddply(NEI.Maryland, .(year),fun=mean(Emissions))
NEI.plots
NEI.plot2
NEI.plot2 <- ddply(NEI.Maryland, .(year),fun=sum(Emissions))
NEI.plot2 <- ddply(NEI.Maryland, .(year),summarize, totalbyyear=sum(Emissions))
NEI.plot2
source("plot2.R")
source("plot2.R")
plot2()
source("plot2.R")
plot2()
str(NEI)
NEI.Maryland <- NEI[which(NEI$fips=="24510" & NEI$year %in% c(1999, 2002,2005,2008)),c(1,4,5,6)]
?split
head(NEI.Maryland)
library(plyr)
# Sum PM2.5 value by year
NEI.plot3 <- ddply(NEI.Maryland, .(year, type),summarize, totalbyyear=sum(Emissions))
head(NEI.plot3)
NEI.plot3 <- ddply(NEI.Maryland, .(type, year),summarize, totalbyyear=sum(Emissions))
attach(NEI.plot3)
head(NEI.plot3)
library(ggplot2)
png("plot3.png", height=480,width=480)
g <- ggplot(NEI.plot3, (x=year, y=totalbyyear))
g + geom_line() + facet.wrap(type)
g <- ggplot(NEI.plot3, aes(x=year, y=totalbyyear))
g + geom_line() + facet.wrap(type)
g <- ggplot(NEI.plot3, aes(x=year, y=totalbyyear))
g + geom_line() + facet_wrap(type)
NEI.plot3 <- ddply(NEI.Maryland, .(year),summarize, totalbyyear=sum(Emissions))
g <- ggplot(NEI.plot3, aes(x=year, y=totalbyyear))
g + geom_line() + facet_wrap(type)
NEI.plot3 <- ddply(NEI.Maryland, .(type),summarize, totalbyyear=sum(Emissions))
g <- ggplot(NEI.plot3, aes(x=year, y=totalbyyear))
g + geom_line() + facet_wrap(type)
NEI.plot3 <- ddply(NEI.Maryland, .(year),summarize, totalbyyear=sum(Emissions))
NEI.plot3
NEI.plot3 <- ddply(NEI.Maryland, .(year), totalbyyear=sum(Emissions))
NEI.plot3
head(NEI.plot3)
NEI.plot3 <- ddply(NEI.Maryland, .(year),summarize, totalbyyear=sum(Emissions))
NEI.plot3
NEI.plot3 <- ddply(NEI.Maryland, .(type,year),summarize, totalbyyear=sum(Emissions))
NEI.plot3
g <- ggplot(NEI.plot3, aes(x=year, y=totalbyyear))
g + geom_line() + facet_wrap(type)
g <- ggplot(NEI.plot3, aes(x=type, y=totalbyyear))
g + geom_line() + facet_wrap(year)
NEI.plot3 <- ddply(NEI.Maryland, .(year,type),summarize, totalbyyear=sum(Emissions))
attach(NEI.plot3)
g <- ggplot(NEI.plot3, aes(x=year, y=totalbyyear))
g + geom_line() + facet_wrap(type)
NEI.plot3
g <- ggplot(NEI.plot3, var(x=year, y=totalbyyear))
g + geom_line() + facet_wrap(type)
g <- ggplot(NEI.plot3, aes(x=year, y=totalbyyear))
g + geom_line()
g <- ggplot(NEI.plot3, aes(x=year, y=totalbyyear))
g + geom_line()
png("plot3.png", height=480,width=480)
g <- ggplot(NEI.plot3, aes(x=year, y=totalbyyear))
g + geom_line()
detach(NEI.plot3)
dev.off()
NEI.Maryland <- NEI[which(NEI$fips=="24510" & NEI$year %in% c(1999, 2002,2005,2008)),c(1,4,5,6)]
# Of the four types of sources indicated by the type (point, nonpoint, onroad, nonroad)
# variable, which of these four sources have seen decreases in emissions from 1999–2008 for
# Baltimore City? Which have seen increases in emissions from 1999–2008? Use the ggplot2
# plotting system to make a plot answer this question.
library(plyr)
# Sum PM2.5 value by year
NEI.plot3 <- ddply(NEI.Maryland, .(year,type),summarize, totalbyyear=sum(Emissions))
attach(NEI.plot3)
#generate and output bar chart
library(ggplot2)
png("plot3.png", height=480,width=480)
g <- ggplot(NEI.Maryland, aes(x=year, y=sum(Emissions)))
g + geom_line()
g + geom_point()
setwd("C:/Documents and Settings/Macro/Desktop/Ivandata/National-Emissions-Inventory")
source("plot3.R")
plot3()
# set project work directory
setwd("C:/Documents and Settings/Macro/Desktop/Ivandata/National-Emissions-Inventory")
# read data from provided data source
nei.url <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
nei.file <- basename(nei.url)
if(!(file.exists(nei.file)))
download.file(nei.url,destfile=nei.file,method="auto")
nei.file.list <- basename(unzip(nei.file))
#nei.file.list
dir()
# This first line will likely take a few seconds. Be patient!
NEI <- readRDS(nei.file.list[2])
SCC <- readRDS(nei.file.list[1])
# Subset NEI dataset
NEI.Maryland <- NEI[which(NEI$fips=="24510" & NEI$year %in% c(1999, 2002,2005,2008)),c(1,4,5,6)]
head(NEI.Maryland)
library(ggplots)
library(ggplot2)
qplot(Emissions, year, data=NEI.Maryland)
qplot(Emissions, type, data=NEI.Maryland)
qplot(sum(Emissions), type, data=NEI.Maryland)
qplot(sum(Emissions), year, data=NEI.Maryland)
qplot(sum(Emissions), year, data=NEI.Maryland, geom="bar")
qplot(sum(Emissions), year, data=NEI.Maryland, geom="bin")
qplot(sum(Emissions), year, data=NEI.Maryland, geom="line")
qplot(Emissions, year, data=NEI.Maryland, facet = .~type)
qplot(Emissions, year, data=NEI.Maryland, facets = .~type)
qplot(Emissions,  data=NEI.Maryland, facets = year~type)
qplot(sum(Emissions),  data=NEI.Maryland, facets = year~type)
qplot(sum(Emissions),  data=NEI.Maryland, facets = type)
qplot(sum(Emissions),  data=NEI.Maryland, facets = type~year)
g <- ggplot(NEI.Maryland, aes(Emissions,year))
g + geom_bar()
g + geom_point()
g <- ggplot(NEI.Maryland, aes(sum(Emissions),year))
g + geom_point()
g <- ggplot(NEI.Maryland, aes(Emissions,year))
g + geom_point() + facet_grid(.~type)
g <- ggplot(NEI.Maryland, aes(year,Emissions))
g + geom_point() + facet_grid(.~type)
g <- ggplot(NEI.Maryland, aes(year,sum(Emissions)))
g + geom_point() + facet_grid(.~type)
g <- ggplot(NEI.Maryland, aes(year,Emissions))
g + geom_point() + facet_grid(.~type)
g <- ggplot(NEI.Maryland, aes(Emissions))
g + geom_point() + facet_grid(year~type)
g + geom_point() + facet_grid(.~type)
g <- ggplot(NEI.Maryland, aes(year,Emissions))
g + geom_point() + facet_grid(year~type)
library(plyr)
# Sum PM2.5 value by year
NEI.plot3 <- ddply(NEI.Maryland, .(year,type),summarize, totalbyyear=sum(Emissions))
NEI.plot3
g <- ggplot(NEI.plot3, aes(year,Emissions))
g + geom_point() + facet_grid(year~type)
g + geom_point() + facet_grid(.~type)
g <- ggplot(NEI.plot3, aes(year, totalbyyear))
g + geom_point() + facet_grid(.~type)
g + geom_line() + facet_grid(.~type)
source("plot3.R")
plot3.R
plot3()
png("plot3.png", height=480,width=480)
g <- ggplot(NEI.plot3, aes(year, totalbyyear))
g + geom_line() + facet_grid(.~type)
dev.off()
g + geom_line() + facet_grid(.~type) + geom_smooth(method="lm")
g + geom_line(size=4) + facet_grid(.~type) + geom_smooth(method="lm")
g + geom_line(size=2,color="steelblue") + facet_grid(.~type) + geom_smooth(method="lm")
g + geom_line(size=1,color="steelblue") + facet_grid(.~type) + geom_smooth(method="lm")
g + geom_line(size=1.5,color="steelblue") + facet_grid(.~type) + geom_smooth(method="lm")
g + geom_bar(size=1.5,color="steelblue") + facet_grid(.~type) + geom_smooth(method="lm")
g + geom_point(size=1.5,color="steelblue") + facet_grid(.~type) + geom_smooth(method="lm")
g + geom_point(size=4,color="steelblue") + facet_grid(.~type) + geom_smooth(method="lm")
g + geom_point(size=4,color=c("steelblue","red","black","yellow") + facet_grid(.~type) + geom_smooth(method="lm")
g + geom_point(size=4,color=c("steelblue","red","black","yellow")) + facet_grid(.~type) + geom_smooth(method="lm")
g + geom_line(size=4,color=c("steelblue","red","black","yellow")) + facet_grid(.~type) + geom_smooth(method="lm")
g + geom_point(size=4,color=c("steelblue","red","black","yellow")) + facet_grid(.~type) + geom_smooth(method="lm")
g + geom_point(size=4,acs(color=type)) + facet_grid(.~type) + geom_smooth(method="lm")
g + geom_point(size=4,aes(color=type)) + facet_grid(.~type) + geom_smooth(method="lm")
g + geom_point(size=4,acs(color=type)) + facet_grid(.~type) + geom_smooth(method="lm", size=1.5, linetype=3,se=F)
g + geom_point(size=4,aes(color=type)) + facet_grid(.~type) + geom_smooth(method="lm", size=1.5, linetype=3,se=F)
g + geom_point(size=4,aes(color=type))
+ facet_grid(.~type)
+ geom_smooth(method="lm", size=1.5, linetype=3,se=F)
g + geom_point(size=4,aes(color=type)) + facet_grid(.~type) + geom_smooth(method="lm", size=1.5, linetype=3,se=F)
g + geom_point(size=4,aes(color=type)) +
facet_grid(.~type) +
geom_smooth(method="lm", size=1.5, linetype=3,se=F)
g + geom_point(size=4,aes(color=type)) +
facet_grid(.~type) +
geom_smooth(method="lm", size=1.5, linetype=3,se=F) +
theme_bw(base_family = "Times”)
g + geom_point(size=4,aes(color=type),alpha=1/3) +
facet_grid(.~type) +
geom_smooth(method="lm", size=1.5, linetype=3,se=F) +
theme_bw(base_family = "Times”)
g + geom_point(size=4,aes(color=type)) +
facet_grid(.~type) +
geom_smooth(method="lm", size=1.5, linetype=3,se=F) +
theme_bw(base_family = "Avenir", base_size=10)
g + geom_point(size=4,aes(color=type)) +
facet_grid(.~type) +
geom_smooth(method="lm", size=1.5, linetype=3,se=F) +
theme_bw(base_family = "Arial", base_size=10)
g + geom_point(size=4,aes(color=type)) +
facet_grid(.~type) +
geom_smooth(method="lm", size=1.5, linetype=3,se=F) +
theme_bw(base_family = "Arial", base_size=12)
g + geom_point(size=4,aes(color=type)) +
facet_grid(.~type) +
geom_smooth(method="lm", size=1.5, linetype=3,se=F) +
theme_bw(base_family = "Arial", base_size=12) +
labs(x = "Year") + labs(y = "Total PM2.5 Emissions") +
labs(title="Total PM2.5 Emissions of Four types across 1999 to 2008")
source("plot3.R")
warnings()
source("plot3.R")
plot3(0)
plot3()
# set project work directory
setwd("C:/Documents and Settings/Macro/Desktop/Ivandata/National-Emissions-Inventory")
# read data from provided data source
nei.url <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
nei.file <- basename(nei.url)
if(!(file.exists(nei.file)))
download.file(nei.url,destfile=nei.file,method="auto")
nei.file.list <- basename(unzip(nei.file))
#nei.file.list
dir()
# This first line will likely take a few seconds. Be patient!
NEI <- readRDS(nei.file.list[2])
SCC <- readRDS(nei.file.list[1])
# Subset NEI dataset
NEI.Maryland <- NEI[which(NEI$fips=="24510" & NEI$year %in% c(1999, 2002,2005,2008)),c(1,4,5,6)]
# Of the four types of sources indicated by the type (point, nonpoint, onroad, nonroad)
# variable, which of these four sources have seen decreases in emissions from 1999–2008 for
# Baltimore City? Which have seen increases in emissions from 1999–2008? Use the ggplot2
# plotting system to make a plot answer this question.
library(plyr)
# Sum PM2.5 value by year
NEI.plot3 <- ddply(NEI.Maryland, .(year,type),summarize, totalbyyear=sum(Emissions))
#generate and output bar chart
library(ggplot2)
png("plot3.png", height=480,width=480)
g <- ggplot(NEI.plot3, aes(year, totalbyyear))
g + geom_point(size=4,aes(color=type)) +
facet_grid(.~type) +
geom_smooth(method="lm", size=1.5, linetype=3,se=F) +
theme_bw(base_family = "Times", base_size=12) +
labs(x = "Year") + labs(y = "Total PM2.5 Emissions") +
labs(title="Total PM2.5 Emissions of Four types across 1999 to 2008")
dev.off()
png("plot3.png", height=480,width=480)
g <- ggplot(NEI.plot3, aes(year, totalbyyear))
g + geom_point(size=4,aes(color=type)) +
facet_grid(.~type) +
geom_smooth(method="lm", size=1.5, linetype=3,se=F) +
theme_bw(base_family = "Times", base_size=12) +
labs(x = "Year") + labs(y = "Total PM2.5 Emissions") +
labs(title="Total PM2.5 Emissions of Four types across 1999 to 2008") +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
dev.off()
warnings()
